# ガイドライン

## 基本原則

- **回答は必ず日本語**
- 分からない・曖昧・判断できない点は、**必ず質問して確認する**
- “勝手に決める”ことを避ける。
- ユーザーのゴール達成に必要だと合理的に判断できる場合は、代替案・改善案を提示する

## コミュニケーション規約

### 不明点は必ず確認

- 判断に迷い・不明点がある場合は、以下の形式で質問する

```text
確認させてください：
1) 〜〜〜 で合っていますか？
2) 出力形式は 〜〜 で良いですか？
3) ファイル名は指定がありますか？
```

### 複数案の提示

- 要件がまだ確定しておらず、複数の選択肢が存在する領域に限り、以下のルールを守る。
    - 複数案（最低 2〜3 案）を提示 
    - 各案に Pros / Cons を付ける 
    - 最後に 推奨案 を示す 

## プランニング規約

### すべての計画は z/ 配下で管理

- `z/` がなければ必ず作成。
- 計画書は Markdown に統一。

### プランの命名規則

```text
YYYY-MM-DD-説明.md
```

- 例：`2025-02-10-ui-refresh-plan.md`

### 実装前にプラン必読

- 最新プランを確認せず実装しない
  - 直近で提示したプランを "最新" とみなす
- プランが曖昧なら必ず質問
- プランと実装がズレる場合は理由を記録し、ユーザー承認を取る

## 開発プロセス規約

### Baby Steps 原則

- 変更は **常に極小単位**
  - 1 回のステップでは、1 つのテスト追加・1 つの修正・1 つの命名改善までに制限する
- できる限り分割して小さく開発する

### TDD サイクル

- t-wada の TDD を参考に開発をします
  - 外側→内側（Outside-In） 
  - 振る舞いからテストを書く 
  - Red → Green → Refactor を守る

#### Red（失敗するテストを書く）

- 1つの振る舞いに絞る
- 仕様が曖昧なら即質問

#### Green（最小限の実装で通す）

- 必要最小限のコードで通す
- 綺麗さは一旦後回し

#### Refactor（設計の改善）

- 命名、分割、責務整理などを実施
- テストが守っている状態で大胆に改善してOK

## デザイン規約

### 美学の方向性の明示

- UI を作る前に必ず以下を決めて言語化する
  - Tone（美学） 
  - 目的 
  - 利用者 
  - 情報密度の方針

- 曖昧な UI は禁止
  - Tone・目的・利用者・情報密度が明確に言語化されていない状態を "曖昧" とみなす

### フォント規約

- system-ui、Inter、Roboto、Arial 禁止
- 見出し用ディスプレイフォント + 本文用テキストフォントの組み合わせを必須

### カラー & テーマ

- 主色 1〜2、アクセント 1 のシンプル構成
- 白背景禁止。必ず質感を作る（ノイズ、メッシュ、光、グレイン等）

### レイアウト

- 以下から明示的に選択
  - 疎レイアウト（大きな余白） 
  - 高密度レイアウト

- どちらも“意図あるズラし”を歓迎。

### 禁止項目

- 紫×白テンプレ
- AI テンプレ UI
- 目的のない左右対称
- 既視感 UI
- 「とりあえず」の構造

## コーディング規約

### 型定義

- type を使用
- interface 禁止
- any 禁止（unknown or generics）
  - unknown 使用時は即 narrow（絞り込み）する
  - JSON ならパーサー型 or 型ガードを伴う

### 関数規則

- 基本は function 宣言
- 戻り値の型を必ず書く
- 引数の関数だけ arrow 関数を利用する

### 命名規則

- camelCase：変数、関数
- PascalCase：型、クラス
- UPPER_CASE：定数

### 非同期処理

- 必ず async/await
  - ただし Promise.all は例外として許可
- then/catch のみは禁止

### エラー処理

- 絶対に握りつぶさない 
- 例外系は明示的に扱う
